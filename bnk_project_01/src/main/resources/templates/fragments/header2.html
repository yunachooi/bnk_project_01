<div th:fragment="header">
  <div class="topbar">
    <div class="topbar-container">
      <a href="#">KR</a><span class="separator">·</span>
      <a href="#">EN</a><span class="separator">·</span>
      <a href="#">CN</a>
      <a href="#" class="global-link">은행소개</a>
    </div>
  </div>

  <nav>
    <div class="nav-container">
      <div class="navbar-top">
        <div class="navbar-top-left">
          <div class="logo">BNK 부산은행</div>
          <ul class="primary-nav">
            <li><a href="#">개인</a></li>
            <li><a href="#">기업</a></li>
            <li><a href="#" class="active">금융상품</a></li>
          </ul>
        </div>

        <div class="user-actions">
          <!-- 로그인 상태 -->
		<span th:if="${session.username != null}">
		  <span>
		    환영합니다, <strong th:text="${session.username}">사용자</strong>님
		  </span>
		  <a th:href="@{/logout}">로그아웃</a>
		</span>

          <!-- 로그아웃 상태 -->
          <span th:unless="${session.username != null}">
            <a th:href="@{/login}">로그인</a>
            <a href="#">인증센터</a>
          </span>

          <a href="#" class="search-toggle" id="searchToggle">검색하기</a>
        </div>
      </div>

      <!-- 검색 드롭다운 -->
      <div class="search-dropdown" id="searchDropdown">
        <div class="dropdown-inner">
          <div class="search-box">
            <input type="text" id="searchInput" placeholder="검색할 내용을 입력해 주세요">
            <button id="searchBtn">검색하기</button>
          </div>
          <div class="suggestions-title">추천 검색어</div>
          <ul class="search-suggestions">
            <li><a href="#">예금</a></li>
            <li><a href="#">대출</a></li>
            <li><a href="#">외환</a></li>
            <li><a href="#">펀드</a></li>
            <li><a href="#">카드</a></li>
          </ul>
        </div>
      </div>

      <!-- 하위 메뉴 -->
      <ul class="navbar-submenu">
        <li><a href="#">예금</a></li>
        <li><a href="#">골드바</a></li>
        <li><a href="#">신탁</a></li>
        <li><a href="#">펀드</a></li>
        <li><a href="#">대출</a></li>
        <li><a href="#">카드</a></li>
        <li><a href="#">외환</a></li>
        <li><a href="#">퇴직연금</a></li>
        <li><a href="#">서민금융</a></li>
        <li><a href="#">국민주택채권</a></li>
      </ul>
    </div>
  </nav>

  <!-- 서브메뉴 퀵 -->
  <div class="submenu-quick">
    <ul>
      <li class="active"><a href="#">메인</a></li>
      <li><a href="#">외화예금</a></li>
      <li><a href="/user/import">수입업무</a></li>
      <li><a href="#">환전</a></li>
      <li><a href="#">환율</a></li>
    </ul>
  </div>

  <!-- 검색 드롭다운 JS -->
  <script>
    const searchToggle = document.getElementById('searchToggle');
    const searchDropdown = document.getElementById('searchDropdown');
    searchToggle.addEventListener('click', e => {
      e.preventDefault();
      searchDropdown.classList.toggle('open');
    });
    document.addEventListener('click', e => {
      if (!searchDropdown.contains(e.target) && e.target !== searchToggle) {
        searchDropdown.classList.remove('open');
      }
    });
  </script>
</div>
