<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BNK 환율 우대 쿠폰</title>

<link rel="stylesheet" th:href="@{/css/common.css}" />
<link rel="stylesheet" th:href="@{/css/dictionary-button.css}" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet" />

<style>
  :root{ --bnk-red:#d7191f; --deep-red:#aa1010; }
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
  body{font-family:'Noto Sans KR',sans-serif;line-height:1.4;}

  header,footer{
    padding:16px 24px;text-align:center;font-weight:700;
    background:#ffffffaa;backdrop-filter:blur(4px);
  }

  @keyframes rainbow {
    0% { color: red; }
    14% { color: orange; }
    28% { color: yellow; }
    42% { color: green; }
    57% { color: blue; }
    71% { color: indigo; }
    85% { color: violet; }
    100% { color: red; }
  }

  .coupon-bg{
    background:url("/img/coupon/coupon-main2.png") center/contain no-repeat;
    aspect-ratio:18 / 13;
    width:100%;
    height:90%;
    display:flex;justify-content:center;align-items:center;
    padding:0;
    position: relative;
  }

  #couponBtn{
    background:none;border:none;cursor:pointer;transition:.2s;
    font-size:40px;font-weight:700;
    position: absolute;
    top: 30.75rem;
    right: 63.5rem;
    border: none;
    background-color: #000000;
    animation: rainbow 3s infinite linear;
  }

  #couponBtn span {
    display: inline-block;
    animation: rainbow 2s infinite linear;
  }

  #couponBtn span:nth-child(1) { animation-delay: 0s; padding-left:20px; }
  #couponBtn span:nth-child(2) { animation-delay: 0.2s; }
  #couponBtn span:nth-child(3) { animation-delay: 0.4s; }
  #couponBtn span:nth-child(4) { animation-delay: 0.6s; }
  #couponBtn span:nth-child(5) { animation-delay: 0.8s; }
  #couponBtn span:nth-child(6) { animation-delay: 1s; }
  #couponBtn span:nth-child(7) { animation-delay: 1.2s; padding-right:20px; }

  #couponBtn:hover{color:#ff3030;}

  .modal {
    display: none;
    position: fixed;
    inset: 0;
    justify-content: center;
    align-items: center;
    background: rgba(0,0,0,.6);
    z-index: 999;
  }

  .modal-content {
    background: #fff;
    padding: 30px 40px;
    border-radius: 14px;
    max-width: 600px;
    width: 90%;
    position: relative;
  }

  .close-btn {
    position: absolute;
    top: 18px;
    right: 22px;
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    color: #999;
  }

  .close-btn:hover { color: #333; }

  .modal-content form label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
  }

  .modal-content form input,
  .modal-content form select {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border: 1px solid #ccc;
    border-radius: 6px;
  }

  .submit-btn {
    display: block;
    margin: 30px auto 0;
    padding: 12px 28px;
    background: var(--bnk-red);
    color: #fff;
    font-size: 1.1rem;
    font-weight: bold;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: .3s;
  }

  .submit-btn:hover {
    background: var(--deep-red);
  }

  .coupon-preview img {
    max-width: 100%;
    border-radius: 10px;
    box-shadow: 0 0 6px rgba(0,0,0,0.1);
  }

  .name-tag {
    position: absolute;
    top: 10%;
    left: 5%;
    background: rgba(255, 255, 255, 0.85);
    padding: 4px 12px;
    border-radius: 6px;
    font-weight: bold;
    color: #000;
  }

  .print-btn {
    margin-top: 20px;
    padding: 10px 24px;
    background-color: var(--bnk-red);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  .print-btn:hover {
    background-color: var(--deep-red);
  }
</style>
</head>
<body>

  <header th:replace="~{fragments/header2 :: header}"></header>

  <div class="coupon-bg">
    <button id="couponBtn" onclick="openForm()">
      <span>쿠</span><span>폰</span><span> </span><span>발</span><span>행</span><span>하</span><span>기</span>
    </button>
  </div>

  <footer th:replace="~{fragments/footer :: footer}"></footer>

  <!-- 신청 폼 모달 -->
  <div id="formModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeForm()">×</span>
      <h2>📝 본인 정보 입력</h2>
      <form id="couponForm">
        <label>이름</label><input id="name" required />
        <label>목적</label>
        <select id="purpose"><option>여행</option><option>이주</option><option>유학</option></select>
        <label>우대율 (%)</label><input value="30%" readonly />
        <button class="submit-btn">✅ 발행</button>
      </form>
    </div>
  </div>

  <!-- 쿠폰 미리보기 모달 -->
  <div id="couponModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeCouponModal()">×</span>
      <h3>환율우대쿠폰</h3>
      <p>본 쿠폰을 출력하거나 사진 촬영 후 창구에 제시해 주세요.</p>
      <div class="coupon-preview" style="position:relative;">
        <img src="/img/coupon/환율우대쿠폰.jpg" alt="환율 쿠폰 이미지" />
        <div class="name-tag">성명: <span id="previewName">고객명</span></div>
      </div>
      <button onclick="window.print()" class="print-btn">🖨️ 인쇄</button>
    </div>
  </div>

<script>
  function openForm() {
    document.getElementById("formModal").style.display = "flex";
  }

  function closeForm() {
    document.getElementById("formModal").style.display = "none";
  }

  function closeCouponModal() {
    document.getElementById("couponModal").style.display = "none";
  }

  document.getElementById("couponForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const name = document.getElementById("name").value;
    document.getElementById("previewName").textContent = name;
    closeForm();
    document.getElementById("couponModal").style.display = "flex";
  });
</script>
</body>
</html>
